---
post_title: 'ASP.NET Core updates in .NET Core 3.0 Preview 2 - 9pm'
layout: post
published: false
tags: Visual Studio 2019, DotNet, Azure
---

Test post with - text, links, list, image, code, gist, iframe. 

[.NET Core 3.0 Preview 2 is now available](https://blogs.msdn.microsoft.com/dotnet/2019/01/29/announcing-net-core-3-preview-2/) and it includes a bunch of new updates to ASP.NET Core.

Here's the list of what's new in this preview:
- Razor Components
- SignalR client-to-server streaming
- Pipes on HttpContext
- Generic host in templates
- Endpoint routing updates

## Get started 

To get started with ASP.NET Core in .NET Core 3.0 Preview 2 [install the .NET Core 3.0 Preview 2 SDK](https://dotnet.microsoft.com/download/dotnet-core/3.0)

If you're on Windows using Visual Studio, you'll also want to [install the latest preview of Visual Studio 2019](https://visualstudio.com/preview).

## Upgrade an existing project

To upgrade an existing an ASP.NET Core app to .NET Core 3.0 Preview 2, follow the [migrations steps in the ASP.NET Core docs](https://docs.microsoft.com/en-us/aspnet/core/migration/22-to-30).

### Add package for Json.NET

example of script

<script src="https://gist.github.com/richlander/7213b5dcaf011ad0cbe3d2582697b228.js"></script>

example of iframe

<iframe width="560" height="315" allowfullscreen="allowfullscreen" frameborder="0" src="https://www.youtube.com/embed/hLFyycJVo0I"></iframe>


As part of the work to [tidy up the ASP.NET Core shared framework](https://blogs.msdn.microsoft.com/webdev/2018/10/29/a-first-look-at-changes-coming-in-asp-net-core-3-0/), Json.NET is being removed from the shared framework and now needs to be added as a package. 

To add back Json.NET support to an ASP.NET Core 3.0 project:
- Add a package reference to [Microsoft.AspNetCore.Mvc.NewtonsoftJson](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson)
- Update your `ConfigureServices` method to include a call to `AddNewtonsoftJson()`.

```csharp
services.AddMvc()
    .AddNewtonsoftJson();
```

```
dotnet new razorcomponents -o WebApplication1
cd WebApplication1
dotnet run
```

Here's what the `Counter` component code looks like:

```html
@page "/counter"

<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class="btn btn-primary" onclick="@IncrementCount">Click me</button>

@functions {
    int currentCount = 0;

    void IncrementCount()
    {
        currentCount+=1;
    }
}
```

To add a parameter to the `Counter` component update the `@functions` block to add a property decorated with the `[Parameter]` attribute:

```csharp
@functions {
    int currentCount = 0;
    [Parameter] int IncrementAmount { get; set; } = 1;
    void IncrementCount()
    {
        currentCount+=IncrementAmount;
    }
}
```
