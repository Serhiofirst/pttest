---
ID: 797
post_title: >
  Customize object displays in the Visual
  Studio debugger YOUR way
author: Serhii Rohatin
post_excerpt: ""
layout: post
permalink: >
  http://devblogs.microsoft.com/nuget/customize-object-displays-in-the-visual-studio-debugger-your-way/
published: true
post_date: 2019-06-10 09:00:03
---
Have you ever stared at objects in a debugger window and wished that you could view those objects by something other than their type?  I certainly have!  Expanding items to determine each one's identity can become tiresome very fast. Ideally, it would be great to quickly locate them by a particular property value.  Luckily for us, Visual Studio has two not-so-well-known attributes known as [**DebuggerDisplay**][1] for managed users, and **[Natvis][2]** for native C++ users. These attributes let you customize how you view objects in debugger windows such as the Watch, Autos, Locals, and datatips! [caption id="attachment_225621" align="aligncenter" width="1512"]<img class="wp-image-225621 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/BeforeAfterDebugDisplay.png" alt="Locals and DataTips windows with and without DebuggerDisplay attribute appended to code" width="1512" height="841" /> *Figure 1 - Locals and DataTips windows with and without DebuggerDisplay attribute appended to code*[/caption]

#### 

#### What is the DebuggerDisplay attribute? By writing DebuggerDisplay syntax at the top of a class, you can choose what strings and properties you want at the top of each object node in debugger windows.  Besides displaying strings in debugger windows, adding curly brackets ({}) to the DebuggerDisplay attribute allows Visual Studio to display the value of a property or method that you specify. You can also add

[format specifiers][3] to DebuggerDisplay in order to further change how values are displayed and formatted in the debugger windows. In Figure 2, DebuggerDisplay appends the format specifier “nq” (no quotes).  The resulting display shows the string property *Title *without the surrounding quotation marks. [caption id="attachment_225620" align="aligncenter" width="1360"]<img class="wp-image-225620 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/BasicDDSyntax.png" alt="Basic DebuggerDisplay syntax added to top of Book class" width="1360" height="378" /> *Figure 2 - Basic DebuggerDisplay syntax added to top of Book class*[/caption]   [caption id="attachment_225619" align="aligncenter" width="1424"]<img class="wp-image-225619 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/BasicDDLocals.png" alt="Locals window with above DebuggerDisplay syntax added to code" width="1424" height="508" /> *Figure 3 - Locals window with above DebuggerDisplay syntax added to code*[/caption]   One previous workaround for performing this task is overriding a class’s ToString() method.  In contrast, DebuggerDisplay controls how an item is displayed *without *overriding that method.  So, if you don't want debugging-related content in your ToString() method (especially when that method is called in your actual program), DebuggerDisplay is the way to go!  

#### Can I display expressions for each object in debugger windows? There may be times when you want to display expressions in debugger windows.  Good news: you can display expressions using the DebuggerDisplay attribute!   [caption id="attachment_225622" align="aligncenter" width="1348"]

<img class="wp-image-225622 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/DDExpression.png" alt="Example of DebuggerDisplay attribute containing an expression" width="1348" height="444" /> *Figure 4 - Example of DebuggerDisplay attribute containing an expression*[/caption]   [caption id="attachment_225623" align="aligncenter" width="1303"]<img class="wp-image-225623 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/DDExpressionLocals.png" alt="Locals window with above DebuggerDisplay syntax and added expression evaluation" width="1303" height="513" /> *Figure 5 - Locals window with above DebuggerDisplay syntax and added expression evaluation*[/caption]   Bad news: DebuggerDisplay expressions can cause additional issues when debugging your code. Potential issues include performance hits for large or complex expressions, compilation and runtime errors when the expression's language differs from the language being debugged, and application state changes when expressions mutate properties.   [caption id="attachment_225624" align="aligncenter" width="1337"]<img class="wp-image-225624 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/DDTernaryExpression.png" alt="Figure 6 - DebuggerDisplay attribute with Visual Basic-style ternary expression syntax added" width="1337" height="45" /> *Figure 6 - DebuggerDisplay attribute with Visual Basic-style ternary expression syntax added*[/caption]   [caption id="attachment_225625" align="aligncenter" width="1562"]<img class="wp-image-225625 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/ExpressionError.png" alt="Figure 7 - Runtime error received after using above Visual Basic-style syntax while debugging in C#" width="1562" height="477" /> *Figure 7 - Runtime error received after using above Visual Basic-style syntax while debugging in C#*[/caption]   But fear not! One way to reduce these potential issues with expressions is by creating a private property or method that returns the string of an executed expression and telling DebuggerDisplay to display that property.   [caption id="attachment_225630" align="aligncenter" width="1432"]<img class="wp-image-225630 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/PrivateDDProperty.png" alt="Figure 8 - Creating a private property containing more complex expressions and formatting referenced by DebuggerDisplay" width="1432" height="352" /> *Figure 8 - Creating a private property containing more complex expressions and formatting referenced by DebuggerDisplay*[/caption]   [caption id="attachment_225629" align="aligncenter" width="1425"]<img class="wp-image-225629 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/PrivateDDMethod.png" alt="Figure 9 - Creating a method containing more complex expressions and formatting referenced by DebuggerDisplay" width="1425" height="421" /> *Figure 9 - Creating a method containing more complex expressions and formatting referenced by DebuggerDisplay*[/caption]  

#### What is the feature equivalent  to DebuggerDisplay for C++ users? DebuggerDisplay is compatible with C#, F#, and Visual Basic, but if you’re debugging in C++,

**Natvis** is a great alternative!  Though not as simple as adding syntax to the top of a class like DebuggerDisplay, adding a .natvis file to a project lets you customize how objects are displayed.   [caption id="attachment_225627" align="aligncenter" width="1301"]<img class="wp-image-225627 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/NatvisLocals.png" alt="Figure 10 - Example of Natvis being used in Locals window" width="1301" height="513" /> *Figure 10 - Example of Natvis being used in Locals window*[/caption]   Right-click the C++ project node in **Solution Explorer**, select **Add **> **New Item, **and select **Visual C++ > Utility > Debugger visualization file (.natvis)**.  The result is an XML file where you can control which properties are displayed while debugging.   [caption id="attachment_225626" align="aligncenter" width="1437"]<img class="wp-image-225626 size-full" src="https://devblogs.microsoft.com/visualstudio/wp-content/uploads/sites/4/2019/06/NatvisFile.png" alt="Figure 11 - Example Natvis file corresponding to display shown above" width="1437" height="295" /> *Figure 11 - Example Natvis file corresponding to display shown above*[/caption]   To learn more about using Natvis while debugging C++ projects, [check out the documentation][2].  

#### These features are awesome and will save me lots of time!  How can I help share DebuggerDisplay and Natvis with others? Fun fact: both DebuggerDisplay and Natvis attributes have been in Visual Studio for years!  These attributes are extremely useful to most developers but are still not as discoverable and well-known as they could be.  As a result, we are currently working to provide an easier method to discover these attributes better, and your feedback will help make this happen!  Please

[complete this survey][4] which will give us insight in providing an improved experience when using these attributes.

 [1]: https://docs.microsoft.com/en-us/visualstudio/debugger/using-the-debuggerdisplay-attribute?view=vs-2019
 [2]: https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2019
 [3]: https://docs.microsoft.com/en-us/visualstudio/debugger/format-specifiers-in-csharp?view=vs-2019
 [4]: https://www.research.net/r/6KCY7WQ